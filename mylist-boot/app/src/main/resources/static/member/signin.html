<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>로그인</title>
  <style>
    a {
      text-decoration: none;
    }
  </style>
</head>
<body>
  <h1>로그인</h1>
  <form name="form1">
    이메일: <input name="email" type="email"><br>
    암호: <input name="password" type="password"><br>
    <div>
      <a href="form.html">회원가입</a><br>
    </div>
    <button id="add-btn">로그인</button>
    <button id="cancel-btn" type="button">취소</button>
  </form>
  <script>
    var xEmail = document.querySelector("input[name=email]")
    var xPassword = document.querySelector("input[name=password]")
    
    document.querySelector("form[name=form1]").onsubmit = function() {
      if (xEmail.value == "" || xPassword.value == "") {
        window.alert("필수 입력 항목이 비었습니다.")
        return false
      }
      
      var fd = new FormData(document.forms.namedItem("form1"))

      fetch("/member/signin", {
        method: "POST",
        body: new URLSearchParams(fd)
      })
      .then(function(response){
        return response.text();
      })
      .then(function(text){
        console.log(text)
        if(text == "success") {
          location.href = "../index.html"
        } else {
          alert("로그인 실패")
        }
      })
      return false
    }
    
    document.querySelector("#cancel-btn").onclick = function() {
      window.location.href = "../index.html"
    }
  </script>
</body>
</html>